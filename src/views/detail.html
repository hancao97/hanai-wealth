<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Permissions-Policy" content="unload=()">
  <title>ËÇ°Á•®ËØ¶ÊÉÖ - HANAI ¬∑ WEALTH</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root { 
      --bg: #f8fafc; 
      --card: #ffffff; 
      --text: #334155; 
      --accent: #3b82f6; 
      --border: rgba(0,0,0,0.1);
      --input-bg: rgba(255,255,255,0.8);
      --shadow: rgba(0,0,0,0.1);
      --primary: #1e40af;
      --secondary: #7c3aed;
      --gold: #f59e0b;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: linear-gradient(88deg, #dbeafe 0%, #e0e7ff 50%, var(--bg) 100%);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
    }
    
    /* Êï∞ÊçÆÊó•ÊúüÊ†∑Âºè */
    .data-date {
      position: absolute;
      top: 226px;
      right: 35px;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.6);
      font-weight: 500;
      letter-spacing: 0.5px;
      z-index: 10;
      padding: 4px 8px;
    }
    
    /* ÁÇ´ÈÖ∑ÁöÑÈ°µÈù¢Â§¥ÈÉ® */
    .hero-header {
      position: relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 24px;
      padding: 60px 40px;
      margin-bottom: 40px;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
    }
    
    .hero-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.1) 75%, transparent 75%, transparent);
      background-size: 60px 60px;
    }
    
    .hero-content {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 30px;
    }
    
    .hero-title-section {
      color: white;
    }
    
    .hero-title {
      font-size: 48px;
      font-weight: 900;
      margin-bottom: 10px;
      text-shadow: 0 4px 8px rgba(0,0,0,0.3);
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    
    .hero-subtitle {
      font-size: 18px;
      opacity: 0.9;
      font-weight: 500;
      letter-spacing: 1px;
    }
    
    .back-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      z-index: 2;
    }
    
    .back-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }
    
    /* ËÇ°Á•®‰ø°ÊÅØÂç°Áâá */
    .stock-info-card {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 24px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    
    .stock-info-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #1e40af, #3b82f6, #7c3aed, #f59e0b);
      background-size: 300% 100%;
      animation: gradientFlow 3s ease infinite;
    }
    
    @keyframes gradientFlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .stock-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .stock-title-group {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .stock-name-row {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .stock-name {
      font-size: 36px;
      font-weight: 800;
      color: var(--text);
      margin: 0;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #7c3aed 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .stock-symbol {
      font-family: 'Courier New', monospace;
      background: var(--accent);
      color: white;
      padding: 8px 16px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 16px;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    
    .stock-tags {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .tag {
      padding: 6px 14px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .board-tag.board-main { background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; }
    .board-tag.board-growth { background: linear-gradient(135deg, #10b981, #059669); color: white; }
    .board-tag.board-star { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }
    .board-tag.board-north { background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; }
    
    .industry-tag {
      background: linear-gradient(135deg, #64748b, #475569);
      color: white;
    }
    
    .sector-tag {
      background: linear-gradient(135deg, #059669, #10b981);
      color: white;
    }
    
    .group-tag {
      background: linear-gradient(135deg, #7c3aed, #8b5cf6);
      color: white;
    }
    
    
    /* Êï¥ÂêàÁöÑ‰ª∑Ê†º‰ø°ÊÅØÊ†∑Âºè */
    .stock-price-info {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-end;
      text-align: right;
      flex-shrink: 0;
    }
    
    .price-main {
      display: flex;
      align-items: baseline;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    
    .current-price {
      font-size: 40px;
      font-weight: 900;
      color: var(--text);
      line-height: 1;
      background: linear-gradient(135deg, var(--text), #1e293b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .price-change {
      font-size: 15px;
      font-weight: 700;
      padding: 8px 14px;
      border-radius: 20px;
      white-space: nowrap;
      line-height: 1.1;
      min-width: fit-content;
      display: inline-block;
    }
    
    .price-change.up {
      background: linear-gradient(135deg, #fef2f2, #fee2e2);
      color: #dc2626;
      border: 1px solid rgba(220, 38, 38, 0.2);
    }
    
    .price-change.down {
      background: linear-gradient(135deg, #f0fdf4, #dcfce7);
      color: #16a34a;
      border: 1px solid rgba(22, 163, 74, 0.2);
    }
    
    .price-change.flat {
      background: linear-gradient(135deg, #fafaf9, #f5f5f4);
      color: #78716c;
      border: 1px solid rgba(120, 113, 108, 0.2);
    }
    
    .market-cap-info {
      font-size: 14px;
      color: #64748b;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 6px;
    }
    
    .market-cap-info::before {
      content: 'üí∞';
      font-size: 14px;
      opacity: 0.7;
    }
    
    .market-cap-info span {
      color: var(--text);
      font-weight: 700;
      font-size: 16px;
    }
    
    /* ‰ª∑Ê†º‰ø°ÊÅØÈù¢Êùø */
    .price-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .price-card {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.6);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .price-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transition: left 0.6s ease;
    }
    
    .price-card:hover::before {
      left: 100%;
    }
    
    .price-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      border-color: rgba(255, 255, 255, 0.8);
    }

    .price-value {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      position: relative;
      z-index: 1;
    }

    .price-label {
      font-size: 14px;
      color: #64748b;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      position: relative;
      z-index: 1;
    }
    
    /* ‰∫îËäíÊòüËØÑÁ∫ßÁ≥ªÁªü */
    .ratings-section {
      background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 24px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    
    .ratings-section::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: conic-gradient(from 0deg at 50% 50%, transparent 0deg, rgba(245, 158, 11, 0.05) 72deg, transparent 144deg, rgba(59, 130, 246, 0.05) 216deg, transparent 288deg, rgba(16, 185, 129, 0.05) 360deg);
      animation: rotateSlow 30s linear infinite;
      pointer-events: none;
    }
    
    @keyframes rotateSlow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .ratings-title {
      text-align: center;
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 40px;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #f59e0b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .ratings-title .data-card-icon {
      -webkit-text-fill-color: initial !important;
      background: none !important;
      background-clip: initial !important;
      -webkit-background-clip: initial !important;
    }
    
    .ratings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      position: relative;
      z-index: 1;
    }
    
    .rating-item {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.5);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .rating-item:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 25px 50px rgba(0,0,0,0.2);
      border-color: rgba(245, 158, 11, 0.5);
    }
    
    .rating-label {
      font-size: 16px;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    /* ‰∫îËäíÊòüÂÆπÂô® */
    .pentagram-container {
      position: relative;
      width: 120px;
      height: 120px;
      margin: 0 auto 20px;
    }
    
    .pentagram-background {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(245, 158, 11, 0.1) 0%, transparent 70%);
      border-radius: 50%;
    }
    
    .pentagram-star {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 15px solid #e2e8f0;
      position: relative;
    }
    
    .pentagram-star:before {
      content: '';
      position: absolute;
      left: -20px;
      top: -12px;
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 15px solid #e2e8f0;
      transform: rotate(35deg);
    }
    
    .pentagram-star:after {
      content: '';
      position: absolute;
      left: -20px;
      top: -12px;
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 15px solid #e2e8f0;
      transform: rotate(-35deg);
    }
    
    /* ‰∫îËäíÊòüÂ°´ÂÖÖÊïàÊûú */
    .pentagram-star.filled {
      border-bottom-color: var(--gold);
      animation: starGlow 2s ease-in-out infinite alternate;
    }
    
    .pentagram-star.filled:before,
    .pentagram-star.filled:after {
      border-bottom-color: var(--gold);
    }
    
    @keyframes starGlow {
      0% { 
        filter: drop-shadow(0 0 5px rgba(245, 158, 11, 0.5));
        transform: translate(-50%, -50%) scale(1);
      }
      100% { 
        filter: drop-shadow(0 0 15px rgba(245, 158, 11, 0.8));
        transform: translate(-50%, -50%) scale(1.05);
      }
    }
    
    /* ÁÆÄÂåñÁöÑÊòüÁ∫ßÊòæÁ§∫ */
    .star-rating {
      display: flex;
      justify-content: center;
      gap: 4px;
      margin-bottom: 15px;
    }
    
    .star {
      width: 20px;
      height: 20px;
      background: #e2e8f0;
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      transition: all 0.3s ease;
    }
    
    .star.filled {
      background: linear-gradient(135deg, #f59e0b, #d97706);
      transform: scale(1.1);
      filter: drop-shadow(0 2px 4px rgba(245, 158, 11, 0.3));
    }
    
    .rating-score {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
    }
    
    /* Êï∞ÊçÆÂç°ÁâáÁΩëÊ†º */
    .data-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
      align-items: start;
    }
    
    .data-card {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      border: 1px solid rgba(148, 163, 184, 0.15);
      border-radius: 24px;
      padding: 32px;
      box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }
    
    .data-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent), var(--secondary), var(--gold));
      background-size: 200% 100%;
      animation: gradientShift 3s ease infinite;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .data-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 
        0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04),
        0 0 0 1px rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.2);
    }
    
    .data-card-title {
      font-size: 22px;
      font-weight: 800;
      color: var(--text);
      margin-bottom: 28px;
      display: flex;
      align-items: center;
      gap: 12px;
      padding-bottom: 16px;
      border-bottom: 2px solid rgba(59, 130, 246, 0.1);
      position: relative;
    }
    
    .data-card-title::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 40px;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--secondary));
      border-radius: 1px;
    }
    
    .data-card-icon {
      font-size: 24px;
      filter: none !important;
      color: initial !important;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
    }
    
    .data-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }

    .data-table tr {
      border-bottom: 1px solid rgba(148, 163, 184, 0.08);
      transition: all 0.3s ease;
    }
    
    .data-table tr:last-child {
      border-bottom: none;
    }

    .data-table tr:hover {
      background-color: rgba(59, 130, 246, 0.04);
      transform: translateX(4px);
    }

    .data-table td {
      padding: 16px 0;
      vertical-align: middle;
      position: relative;
    }
    
    .data-table tr:hover td {
      color: var(--accent);
    }

    .data-table td:first-child {
      font-weight: 600;
      color: #64748b;
      width: 45%;
      font-size: 15px;
      position: relative;
    }
    
    .data-table td:first-child::before {
      content: '';
      position: absolute;
      left: -8px;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 0;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      border-radius: 2px;
      transition: height 0.3s ease;
    }
    
    .data-table tr:hover td:first-child::before {
      height: 20px;
    }
    
    .data-table td:last-child {
      font-weight: 700;
      color: var(--text);
      text-align: right;
      font-size: 15px;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(124, 58, 237, 0.05));
      padding: 16px 12px;
      margin-left: 8px;
    }
    
    /* PEÂõæË°®Ê†∑Âºè */
    .pe-chart-container, .pe-chart-container-solo {
      border: 1px solid rgba(59, 130, 246, 0.1);
      border-radius: 16px;
      padding: 24px;
      backdrop-filter: blur(10px);
      box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.05),
        0 2px 4px -1px rgba(0, 0, 0, 0.03);
    }
    
    /* ÂõæË°®ÁΩëÊ†ºÂ∏ÉÂ±Ä */
    .charts-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-top: 24px;
      align-items: stretch;
    }
    
    .pe-chart-container-solo {
      width: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .price-range-container {
      margin-top: 0;
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    .pe-chart-title {
      font-size: 16px;
      font-weight: 800;
      color: var(--text);
      margin-bottom: 20px;
      text-align: center;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      position: relative;
    }
    
    .pe-chart-title::after {
      content: '';
      position: absolute;
      bottom: -6px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--secondary));
      border-radius: 1px;
    }
    
    .pe-chart-wrapper {
      position: relative;
      padding: 0 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .pe-range-bar {
      position: relative;
      height: 12px;
      margin: 30px 0;
    }
    
    .pe-range-track {
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        #10b981 0%, 
        #f59e0b 50%, 
        #ef4444 100%);
      border-radius: 6px;
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
    }
    
    .pe-current-marker {
      position: absolute;
      top: -15px;
      transform: translateX(-50%);
      background: var(--text);
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 2;
      transition: all 0.3s ease;
    }
    
    .pe-current-marker::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 6px solid var(--text);
    }
    
    .pe-current-value {
      white-space: nowrap;
    }
    
    .pe-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
    }
    
    .pe-label {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      flex: 1;
    }
    
    .pe-label-title {
      font-size: 11px;
      color: #64748b;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .pe-label-value {
      font-size: 14px;
      font-weight: 800;
      padding: 6px 10px;
      border-radius: 8px;
      min-width: 50px;
      text-align: center;
    }
    
    .pe-label.pe-low .pe-label-value {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05));
      color: #059669;
      border: 1px solid rgba(16, 185, 129, 0.2);
    }
    
    .pe-label.pe-current .pe-label-value {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(124, 58, 237, 0.1));
      color: var(--text);
      border: 1px solid rgba(59, 130, 246, 0.2);
    }
    
    .pe-label.pe-high .pe-label-value {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05));
      color: #dc2626;
      border: 1px solid rgba(239, 68, 68, 0.2);
    }
    
    /* ËÇ°‰ª∑Âå∫Èó¥ÂõæË°®Ê†∑Âºè */
    .price-range-container {
      border: 1px solid rgba(59, 130, 246, 0.1);
      border-radius: 16px;
      padding: 24px;
      backdrop-filter: blur(10px);
      box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.05),
        0 2px 4px -1px rgba(0, 0, 0, 0.03);
      width: 100%;
    }
    
    .price-range-title {
      font-size: 16px;
      font-weight: 800;
      color: var(--text);
      margin-bottom: 20px;
      text-align: center;
      background: linear-gradient(135deg, var(--success), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      position: relative;
    }
    
    .price-range-title::after {
      content: '';
      position: absolute;
      bottom: -6px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 2px;
      background: linear-gradient(90deg, var(--success), var(--accent));
      border-radius: 1px;
    }
    
    .price-range-wrapper {
      position: relative;
      padding: 0 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .price-range-bar {
      position: relative;
      height: 12px;
      margin: 30px 0;
    }
    
    .price-range-track {
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        #ef4444 0%, 
        #f59e0b 50%, 
        #10b981 100%);
      border-radius: 6px;
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
    }
    
    .price-current-marker {
      position: absolute;
      top: -15px;
      transform: translateX(-50%);
      background: var(--text);
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 2;
      transition: all 0.3s ease;
    }
    
    .price-current-marker::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 6px solid var(--text);
    }
    
    .price-current-value {
      white-space: nowrap;
    }
    
    .price-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
    }
    
    .price-label {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      flex: 1;
    }
    
    .price-label-title {
      font-size: 11px;
      color: #64748b;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .price-label-value {
      font-size: 14px;
      font-weight: 800;
      padding: 6px 10px;
      border-radius: 8px;
      min-width: 50px;
      text-align: center;
    }
    
    .price-label.price-low .price-label-value {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05));
      color: #dc2626;
      border: 1px solid rgba(239, 68, 68, 0.2);
    }
    
    .price-label.price-current .price-label-value {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
      color: #d97706;
      border: 1px solid rgba(245, 158, 11, 0.2);
    }
    
    .price-label.price-high .price-label-value {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05));
      color: #059669;
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    /* ‰∫èÊçüÊåáÁ§∫Âô®Ê†∑Âºè */
    .loss-indicator {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      padding: 20px 24px;
      text-align: center;
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.05), rgba(220, 38, 38, 0.03));
      border: 2px dashed rgba(239, 68, 68, 0.2);
      border-radius: 12px;
      margin: 10px 0;
      gap: 16px;
    }
    
    .loss-icon {
      font-size: 32px;
      filter: grayscale(0.3);
      flex-shrink: 0;
    }
    
    .loss-content {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      text-align: left;
    }
    
    .loss-text {
      font-size: 18px;
      font-weight: 800;
      color: #dc2626;
      margin-bottom: 4px;
      background: linear-gradient(135deg, #dc2626, #ef4444);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .loss-desc {
      font-size: 12px;
      color: #64748b;
      font-weight: 500;
      line-height: 1.4;
      max-width: 200px;
    }

    /* ‰º∞ÂÄºÊ†áÁ≠æ */
    .valuation-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 12px;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .valuation-0 { background: linear-gradient(135deg, #94a3b8, #64748b); color: white; }
    .valuation-2 { background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; }
    .valuation-3 { background: linear-gradient(135deg, #059669, #047857); color: white; }
    .valuation-4 { background: linear-gradient(135deg, #0891b2, #0e7490); color: white; }
    .valuation-5 { background: linear-gradient(135deg, #7c3aed, #6d28d9); color: white; }
    .valuation-6 { background: linear-gradient(135deg, #ea580c, #c2410c); color: white; }
    .valuation-7 { background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; }
    
    /* ÂõæË°®ÂÆπÂô® */
    .chart-section {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 24px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    
    .chart-title {
      text-align: center;
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 30px;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #7c3aed 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .ratings-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: center;
      min-height: 400px;
    }
    
    .radar-chart-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.6);
      border-radius: 20px;
      padding: 20px;
    }
    
    #radarChart {
      width: 100% !important;
      height: 400px !important;
      min-height: 350px;
    }
    
    .ratings-details {
      display: flex;
      flex-direction: column;
      gap: 20px;
      justify-content: center;
      height: 100%;
    }
    
    .ratings-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 6px;
    }
    
    .rating-item {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.5);
      border-radius: 12px;
      padding: 10px 14px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }
    
    .rating-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.1);
      border-color: rgba(245, 158, 11, 0.5);
    }
    
    .rating-item.active {
      border-color: var(--gold);
      box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
    }
    
    .rating-label {
      font-size: 13px;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .star-rating {
      display: flex;
      justify-content: center;
      gap: 2px;
      margin-bottom: 4px;
    }
    
    .star {
      width: 14px;
      height: 14px;
      background: #e2e8f0;
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      transition: all 0.3s ease;
    }
    
    .star.filled {
      background: linear-gradient(135deg, #f59e0b, #d97706);
      transform: scale(1.1);
      filter: drop-shadow(0 2px 4px rgba(245, 158, 11, 0.3));
    }
    
    .rating-score {
      font-size: 15px;
      font-weight: 700;
      color: var(--accent);
    }
    
    /* Tooltip Ê†∑Âºè */
    .rating-tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
      margin-bottom: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .rating-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: rgba(0, 0, 0, 0.9);
    }
    
    .rating-item:hover .rating-tooltip {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-5px);
    }
    
    .ratings-summary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 20px;
      color: white;
      position: relative;
      overflow: hidden;
    }
    
    .ratings-summary::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.1) 75%, transparent 75%, transparent);
      background-size: 20px 20px;
      pointer-events: none;
    }
    
    .summary-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      position: relative;
      z-index: 1;
    }
    
    .summary-item:last-child {
      margin-bottom: 0;
    }
    
    .summary-label {
      font-size: 14px;
      font-weight: 600;
      opacity: 0.9;
    }
    
    .summary-value {
      font-size: 24px;
      font-weight: 800;
    }
    
    .summary-recommendation {
      font-size: 16px;
      font-weight: 700;
      padding: 6px 12px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }
    
    /* ÂÖ¨Âè∏‰ø°ÊÅØÈÉ®ÂàÜ */
    .company-section {
      background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 24px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    
    .company-title {
      text-align: center;
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 30px;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #7c3aed 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .company-title .data-card-icon {
      -webkit-text-fill-color: initial !important;
      background: none !important;
      background-clip: initial !important;
      -webkit-background-clip: initial !important;
    }
    
    .company-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .company-card {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(148, 163, 184, 0.15);
      border-radius: 20px;
      padding: 32px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -1px rgba(0, 0, 0, 0.06);
      margin-bottom: 24px;
    }
    
    .company-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6);
      background-size: 200% 100%;
      animation: gradientShift 4s ease infinite;
    }
    
    .company-card:hover {
      transform: translateY(-6px) scale(1.01);
      box-shadow: 
        0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04),
        0 0 0 1px rgba(16, 185, 129, 0.1);
      border-color: rgba(16, 185, 129, 0.2);
    }
    
    .company-card h4 {
      font-size: 20px;
      font-weight: 800;
      color: var(--text);
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
      padding-bottom: 16px;
      border-bottom: 2px solid rgba(16, 185, 129, 0.1);
      position: relative;
    }
    
    .company-card h4::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 50px;
      height: 2px;
      background: linear-gradient(90deg, #10b981, #3b82f6);
      border-radius: 1px;
    }
    
    .company-title {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .description-card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.8) 100%);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(148, 163, 184, 0.15);
      border-radius: 16px;
      padding: 32px;
      line-height: 1.8;
      font-size: 15px;
      color: #475569;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
    }
    
    .description-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.02) 0%, rgba(59, 130, 246, 0.02) 100%);
      border-radius: 16px;
      pointer-events: none;
      line-height: 1.8;
      color: var(--text);
    }
    
    /* Âä†ËΩΩÂíåÈîôËØØÁä∂ÊÄÅ */
    .loading {
      text-align: center;
      padding: 100px 20px;
      font-size: 20px;
      color: #64748b;
    }
    
    .loading::before {
      content: '';
      display: block;
      width: 50px;
      height: 50px;
      margin: 0 auto 20px;
      border: 4px solid #e2e8f0;
      border-top: 4px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .error {
      text-align: center;
      padding: 100px 20px;
      color: var(--danger);
      font-size: 18px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.2);
      border-radius: 12px;
      margin: 20px 0;
    }
    
    /* ÂìçÂ∫îÂºèËÆæËÆ° */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }

      .hero-header {
        padding: 40px 20px;
        margin-bottom: 30px;
      }

      .hero-title {
        font-size: 32px;
      }
      
      .hero-subtitle {
        font-size: 16px;
      }

      .back-btn {
        top: 15px;
        right: 15px;
        padding: 10px 16px;
        font-size: 14px;
      }

      .stock-info-card {
        padding: 25px;
      }
      
      .stock-name {
        font-size: 24px;
      }
      
      .stock-symbol {
        font-size: 14px;
        padding: 6px 12px;
      }
      
      
      .stock-price-info {
        align-items: flex-start;
        text-align: left;
        margin-top: 12px;
      }
      
      .price-main {
        justify-content: flex-start;
        gap: 8px;
      }
      
      .current-price {
        font-size: 32px;
      }
      
      .price-change {
        font-size: 14px;
        padding: 6px 12px;
      }
      
      .market-cap-info {
        font-size: 13px;
        justify-content: flex-start;
        margin-top: 6px;
      }
      
      .market-cap-info span {
        font-size: 15px;
      }

      .ratings-section {
        padding: 25px;
      }
      
      .ratings-title {
        font-size: 20px;
        margin-bottom: 25px;
      }
      
      .ratings-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .rating-item {
        padding: 20px;
      }

      .pentagram-container {
        width: 80px;
        height: 80px;
      }
      
      .data-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        margin-bottom: 32px;
      }
      
      .data-card {
        padding: 24px;
        border-radius: 20px;
      }
      
      .data-card-title {
        font-size: 20px;
        margin-bottom: 24px;
      }
      
      .data-table td {
        padding: 14px 0;
        font-size: 14px;
      }
      
      .data-table td:first-child {
        font-size: 14px;
      }
      
      .data-table td:last-child {
        padding: 14px 10px;
        font-size: 14px;
      }
      
      .charts-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 20px;
      }
      
      .pe-chart-container, .pe-chart-container-solo {
        padding: 20px;
      }
      
      .pe-chart-title {
        font-size: 16px;
        margin-bottom: 20px;
      }
      
      .pe-chart-wrapper {
        padding: 0 12px;
      }
      
      .pe-labels {
        margin-top: 20px;
        gap: 10px;
      }
      
      .pe-label-title {
        font-size: 10px;
      }
      
      .pe-label-value {
        font-size: 13px;
        padding: 5px 8px;
        min-width: 45px;
      }
      
      .price-range-container {
        padding: 20px;
      }
      
      .price-range-title {
        font-size: 16px;
        margin-bottom: 20px;
      }
      
      .price-range-wrapper {
        padding: 0 12px;
      }
      
      .price-labels {
        margin-top: 20px;
        gap: 10px;
      }
      
      .price-label-title {
        font-size: 10px;
      }
      
      .price-label-value {
        font-size: 13px;
        padding: 5px 8px;
        min-width: 45px;
      }
      
      .loss-indicator {
        padding: 16px 20px;
        margin: 8px 0;
        gap: 12px;
      }
      
      .loss-icon {
        font-size: 28px;
      }
      
      .loss-text {
        font-size: 16px;
        margin-bottom: 3px;
      }
      
      .loss-desc {
        font-size: 11px;
        max-width: 180px;
      }
      
      .chart-section,
      .company-section {
        padding: 28px;
      }
      
      .company-card {
        padding: 24px;
        margin-bottom: 20px;
        border-radius: 18px;
      }
      
      .company-card h4 {
        font-size: 18px;
        margin-bottom: 20px;
      }
      
      .description-card {
        padding: 24px;
        font-size: 14px;
        line-height: 1.7;
      }
      
      .ratings-container {
        grid-template-columns: 1fr;
        gap: 25px;
      }
      
      .ratings-details {
        order: -1;
      }
      
      #radarChart {
        height: 350px !important;
      }
      
      .company-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }

    @media (max-width: 480px) {
      .hero-title {
        font-size: 28px;
      }

      .stock-header {
        flex-direction: column;
        gap: 20px;
      }
      
      .stock-name-row {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }

      .stock-name {
        font-size: 20px;
      }
      
      
      .stock-header {
        flex-direction: column;
        gap: 15px;
      }
      
      .stock-price-info {
        align-items: flex-start;
        text-align: left;
      }
      
      .current-price {
        font-size: 24px;
      }
      
      .price-change {
        font-size: 13px;
        padding: 3px 8px;
      }
      
      .market-cap-info {
        font-size: 13px;
        padding: 8px 10px;
        margin-top: 8px;
      }
      
      .market-cap-info span {
        font-size: 14px;
      }

      .pentagram-container {
        width: 60px;
        height: 60px;
      }
      
      #radarChart {
        height: 280px !important;
      }
      
      .ratings-details {
        gap: 15px;
      }
      
      .rating-item {
        padding: 10px 12px;
      }
      
      .rating-label {
        font-size: 12px;
        margin-bottom: 6px;
      }
      
      .star {
        width: 12px;
        height: 12px;
      }
      
      .rating-score {
        font-size: 13px;
      }
      
      .ratings-grid {
        gap: 6px;
      }
      
      .ratings-summary {
        padding: 20px;
      }
      
      .summary-value {
        font-size: 20px;
      }
      
      .summary-recommendation {
        font-size: 14px;
        padding: 4px 8px;
      }
    }
    
    /* ÁßªÂä®Á´ØÊó•ÊúüÊ†∑Âºè */
    @media (max-width: 768px) {
      .data-date {
        position: static;
        text-align: center;
        margin-bottom: 10px;
        font-size: 11px;
        background: rgba(255, 255, 255, 0.05);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Êï∞ÊçÆÊó•ÊúüÊòæÁ§∫ -->
    <div class="data-date" id="dataDate">-</div>
    
    <!-- ÁÇ´ÈÖ∑È°µÈù¢Â§¥ÈÉ® -->
    <div class="hero-header">
      <a href="index.html" class="back-btn">‚Üê ËøîÂõûÂàóË°®</a>
      <div class="hero-content">
        <div class="hero-title-section">
          <h1 class="hero-title">HANAI ¬∑ WEALTH</h1>
          <p class="hero-subtitle">Êô∫ËÉΩËÇ°Á•®‰ª∑ÂÄºÂàÜÊûê ¬∑ ‰∏ì‰∏öÊäïËµÑÂÜ≥Á≠ñÊîØÊåÅ</p>
        </div>
      </div>
    </div>
    
    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
    <div id="loadingIndicator" class="loading">
      Ê≠£Âú®Âä†ËΩΩËÇ°Á•®ËØ¶ÊÉÖÊï∞ÊçÆ...
    </div>

    <!-- ÈîôËØØÁä∂ÊÄÅ -->
    <div id="errorMessage" class="error" style="display: none;">
    </div>

    <!-- ËÇ°Á•®ËØ¶ÊÉÖÂÜÖÂÆπ -->
    <div id="stockDetail" style="display: none;">
      <!-- ËÇ°Á•®Âü∫Á°Ä‰ø°ÊÅØÂç°Áâá -->
      <div class="stock-info-card">
        <div class="stock-header">
          <div class="stock-title-group">
            <div class="stock-name-row">
              <h2 class="stock-name" id="stockName">-</h2>
              <span class="stock-symbol" id="stockSymbol">-</span>
            </div>
            <div class="stock-tags">
              <span class="tag board-tag" id="stockBoard">-</span>
              <span class="tag industry-tag" id="stockIndustry">-</span>
              <span class="tag sector-tag" id="sectorTag">-</span>
              <span class="tag group-tag" id="groupTag">-</span>
            </div>
          </div>
          <div class="stock-price-info">
            <div class="price-main">
              <span class="current-price" id="currentPriceIntegrated">-</span>
              <span class="price-change" id="priceChangeIntegrated">-</span>
            </div>
            <div class="market-cap-info">
              <span id="marketCapIntegrated">-</span>
            </div>
          </div>
        </div>
        
        <!-- ÂõæË°®ÁΩëÊ†ºÂÆπÂô® -->
        <div class="charts-grid">
          <!-- PE‰º∞ÂÄºÂõæË°® -->
          <div class="pe-chart-container-solo">
            <h4 class="pe-chart-title">Â∏ÇÁõàÁéá‰º∞ÂÄºÂå∫Èó¥</h4>
            <div class="pe-chart-wrapper">
              <div class="pe-range-bar">
                <div class="pe-range-track"></div>
                <div class="pe-current-marker" id="peCurrentMarker">
                  <span class="pe-current-value" id="peCurrentValue">-</span>
                </div>
              </div>
              <div class="pe-labels">
                <span class="pe-label pe-low">
                  <span class="pe-label-title">10Âπ¥ÊúÄ‰Ωé</span>
                  <span class="pe-label-value" id="peLowLabel">-</span>
                </span>
                <span class="pe-label pe-current">
                  <span class="pe-label-title">ÂΩìÂâçTTM</span>
                  <span class="pe-label-value" id="peCurrentLabel">-</span>
                </span>
                <span class="pe-label pe-high">
                  <span class="pe-label-title">10Âπ¥ÊúÄÈ´ò</span>
                  <span class="pe-label-value" id="peHighLabel">-</span>
                </span>
              </div>
            </div>
          </div>
          
          <!-- ËÇ°‰ª∑Âå∫Èó¥ÂõæË°® -->
          <div class="price-range-container">
            <h4 class="price-range-title">ËÇ°‰ª∑ÂéÜÂè≤Âå∫Èó¥</h4>
            <div class="price-range-wrapper">
              <div class="price-range-bar">
                <div class="price-range-track"></div>
                <div class="price-current-marker" id="priceCurrentMarker">
                  <span class="price-current-value" id="priceCurrentValue">-</span>
                </div>
              </div>
              <div class="price-labels">
                <span class="price-label price-low">
                  <span class="price-label-title">10Âπ¥ÊúÄ‰Ωé</span>
                  <span class="price-label-value" id="priceLowLabel">-</span>
                </span>
                <span class="price-label price-current">
                  <span class="price-label-title">ÂΩìÂâç‰ª∑Ê†º</span>
                  <span class="price-label-value" id="priceCurrentLabel">-</span>
                </span>
                <span class="price-label price-high">
                  <span class="price-label-title">10Âπ¥ÊúÄÈ´ò</span>
                  <span class="price-label-value" id="priceHighLabel">-</span>
                </span>
              </div>
            </div>
          </div>
        </div>
        </div>


      <!-- Êï∞ÊçÆÂç°ÁâáÁΩëÊ†º -->
      <div class="data-grid">
        <!-- ‰º∞ÂÄº‰ø°ÊÅØ -->
        <div class="data-card">
          <h3 class="data-card-title">
            <span class="data-card-icon">üìä</span>
            <span>‰º∞ÂÄºÂàÜÊûê</span>
          </h3>
          <table class="data-table">
            <tr>
              <td>GF‰º∞ÂÄºËØÑÁ∫ß</td>
              <td id="gfValuation">-</td>
            </tr>
            <tr>
              <td>GFÂêàÁêÜ‰º∞ÂÄº</td>
              <td id="gfValue">-</td>
            </tr>
            <tr>
              <td>Â∏ÇÂáÄÁéá</td>
              <td id="pbRatio">-</td>
            </tr>
          </table>
        </div>

        <!-- Ë¥¢Âä°ÊåáÊ†á -->
        <div class="data-card">
          <h3 class="data-card-title">
            <span class="data-card-icon">üí∞</span>
            <span>Ë¥¢Âä°Ë°®Áé∞</span>
          </h3>
          <table class="data-table">
            <tr>
              <td>ËÇ°ÊÅØÁéá</td>
              <td id="dividendYield">-</td>
            </tr>
            <tr>
              <td>ÊØõÂà©Áéá</td>
              <td id="grossMargin">-</td>
            </tr>
            <tr>
              <td>ÂáÄÂà©Áéá</td>
              <td id="netMargin">-</td>
            </tr>
            <tr>
              <td>Ëá™Áî±Áé∞ÈáëÊµÅ</td>
              <td id="freeCashFlow">-</td>
            </tr>
            <tr>
              <td>10Âπ¥ÂáÄÂà©Ê∂¶Â¢ûÈïø</td>
              <td id="incomeGrowth">-</td>
            </tr>
          </table>
        </div>

        <!-- ‰ª∑Ê†ºÂå∫Èó¥ -->
        <div class="data-card">
          <h3 class="data-card-title">
            <span class="data-card-icon">üìà</span>
            <span>‰ª∑Ê†ºÂå∫Èó¥</span>
          </h3>
          <table class="data-table">
            <tr>
              <td>10Âπ¥Âπ¥ÂåñÂõûÊä•</td>
              <td id="return10y">-</td>
            </tr>
            <tr>
              <td>20Êó•ÂùáÁ∫ø</td>
              <td id="sma20">-</td>
            </tr>
            <tr>
              <td>50Êó•ÂùáÁ∫ø</td>
              <td id="sma50">-</td>
            </tr>
            <tr>
              <td>200Êó•ÂùáÁ∫ø</td>
              <td id="sma200">-</td>
            </tr>
          </table>
        </div>

            </div>
            
      <!-- ‰∫îÁª¥ËØÑÁ∫ß‰ΩìÁ≥ª -->
      <div class="ratings-section">
        <h3 class="ratings-title">
          <span class="data-card-icon">‚≠ê</span>
          <span>‰∫îÁª¥ËØÑÁ∫ß‰ΩìÁ≥ª</span>
        </h3>
        <div class="ratings-container">
          <div class="radar-chart-wrapper">
            <div id="radarChart" style="width: 100%; height: 400px;"></div>
          </div>
          <div class="ratings-details">
            <div class="ratings-grid" id="ratingsGrid">
              <!-- Âä®ÊÄÅÁîüÊàê‰∫îËäíÊòüËØÑÁ∫ß -->
            </div>
            <div class="ratings-summary">
              <div class="summary-item">
                <span class="summary-label">Â§ßÂ∏àËØÑÂàÜ</span>
                <span class="summary-value" id="overallScore">-</span>
              </div>
            </div>
          </div>
          </div>
        </div>
        
      <!-- ÂÖ¨Âè∏‰ø°ÊÅØ -->
      <div class="company-section">
        <h3 class="company-title">
          <span class="data-card-icon">üè¢</span>
          <span>ÂÖ¨Âè∏‰ø°ÊÅØ</span>
        </h3>
        
        <div class="company-card">
          <h4>
            <span class="data-card-icon">üíº</span>
            <span>‰∏ªËê•‰∏öÂä°</span>
          </h4>
          <div id="mainBusiness" class="description-card">-</div>
          </div>
          
        <div class="company-card">
          <h4>
            <span class="data-card-icon">üìñ</span>
            <span>ÂÖ¨Âè∏ÁÆÄ‰ªã</span>
          </h4>
          <div id="businessDesc" class="description-card">-</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    class StockDetail {
      constructor() {
        this.stockData = null;
        this.initializeElements();
        this.loadStockData();
      }
      
      initializeElements() {
        this.loadingIndicator = document.getElementById('loadingIndicator');
        this.errorMessage = document.getElementById('errorMessage');
        this.stockDetail = document.getElementById('stockDetail');
      }

      async loadStockData() {
        try {
          // ‰ªéURLÂèÇÊï∞Ëé∑ÂèñstockidÂíådate
          const urlParams = new URLSearchParams(window.location.search);
          const stockid = urlParams.get('stockid');
          const date = urlParams.get('date');
          
          if (!stockid || !date) {
            throw new Error('Áº∫Â∞ëÂøÖË¶ÅÂèÇÊï∞ÔºöstockidÊàñdate');
          }

          // Âä†ËΩΩÊåáÂÆöÊó•ÊúüÁöÑÊï∞ÊçÆÊñá‰ª∂
          const response = await fetch(`./assets/${date}.json`);
          if (!response.ok) {
            throw new Error(`Êó†Ê≥ïÂä†ËΩΩ ${date} ÁöÑÊï∞ÊçÆÊñá‰ª∂`);
          }

          const allData = await response.json();
          
          // Ê†πÊçÆstockidÊü•ÊâæÂØπÂ∫îÁöÑËÇ°Á•®Êï∞ÊçÆ
          this.stockData = allData.find(item => item.stockid === stockid);
          
          if (!this.stockData) {
            throw new Error(`Êú™ÊâæÂà∞stockid‰∏∫ ${stockid} ÁöÑËÇ°Á•®Êï∞ÊçÆ`);
          }

          this.renderStockDetail();
        } catch (error) {
          this.showError(`Âä†ËΩΩËÇ°Á•®Êï∞ÊçÆÂ§±Ë¥•: ${error.message}`);
        }
      }

      renderStockDetail() {
        if (!this.stockData) return;

        const data = this.stockData;

        // Âü∫Á°Ä‰ø°ÊÅØ
        document.getElementById('stockName').textContent = data.company || 'N/A';
        document.getElementById('stockSymbol').textContent = data.exchange_+ ':' + data.symbol || 'N/A';
        document.getElementById('stockIndustry').textContent = data.industry || 'N/A';
        
        // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò
        document.title = `${data.company || data.symbol || 'N/A'} - ËÇ°Á•®ËØ¶ÊÉÖ - HANAI ¬∑ WEALTH`;
        
        const board = data.board || this.detectStockBoard(data.symbol);
        const boardElement = document.getElementById('stockBoard');
        boardElement.textContent = board;
        boardElement.className = `tag board-tag ${this.getBoardClass(board)}`;

        // Êï¥ÂêàÁöÑ‰ª∑Ê†º‰ø°ÊÅØ
        document.getElementById('currentPriceIntegrated').textContent = this.formatPrice(data.price);
        
        const changeElementIntegrated = document.getElementById('priceChangeIntegrated');
        const pctChangeValue = data.p_pct_change;
        const priceChangeValue = data.p_change;
        
        if (pctChangeValue !== undefined && priceChangeValue !== undefined) {
          // ÊûÑÂª∫ÊòæÁ§∫ÊñáÊú¨ÔºöÁªùÂØπÂèòÂåñ + ÁôæÂàÜÊØîÂèòÂåñ
          const priceChangeText = priceChangeValue >= 0 ? `+${priceChangeValue.toFixed(2)}` : `${priceChangeValue.toFixed(2)}`;
          const pctChangeText = pctChangeValue >= 0 ? `+${pctChangeValue.toFixed(2)}%` : `${pctChangeValue.toFixed(2)}%`;
          const changeText = `${priceChangeText} (${pctChangeText})`;
          
          changeElementIntegrated.textContent = changeText;
          
          // ËÆæÁΩÆÊ∂®Ë∑åÈ¢úËâ≤Á±ªÔºàÂü∫‰∫éÁôæÂàÜÊØîÂèòÂåñÔºâ
          changeElementIntegrated.className = 'price-change';
          if (pctChangeValue > 0) {
            changeElementIntegrated.classList.add('up');
          } else if (pctChangeValue < 0) {
            changeElementIntegrated.classList.add('down');
          } else {
            changeElementIntegrated.classList.add('flat');
          }
        }

        const marketCapElement = document.getElementById('marketCapIntegrated');
        const marketCapValue = this.formatMarketCap(data.mktcap_norm_currency);
        marketCapElement.innerHTML = `ÊÄªÂ∏ÇÂÄº <span>${marketCapValue}</span>`;

        // ‰º∞ÂÄº‰ø°ÊÅØ
        const gfValuationElement = document.getElementById('gfValuation');
        const gfValuation = data.gf_valuation;
        gfValuationElement.innerHTML = `
          <span class="valuation-badge valuation-${gfValuation || 0}">
            ${this.getValuationDescription(gfValuation)}
          </span>
        `;

        document.getElementById('gfValue').textContent = data.gf_value ? `¬•${data.gf_value.toFixed(2)}` : 'N/A';
        document.getElementById('pbRatio').textContent = data.pb ? data.pb.toFixed(2) : 'N/A';
        
        // PEÂõæË°®Êï∞ÊçÆÂ§ÑÁêÜÔºàÈ°∂ÈÉ®ÊòæÁ§∫Ôºâ
        this.renderPEChart(data.pettm, data.pettmhigh, data.pettmlow);
        
        // ËÇ°‰ª∑Âå∫Èó¥ÂõæË°®Êï∞ÊçÆÂ§ÑÁêÜ
        this.renderPriceRangeChart(data.price, data.price10yhigh, data.price10ylow);

        // Ë¥¢Âä°ÊåáÊ†á
        document.getElementById('dividendYield').textContent = data.yield ? `${data.yield.toFixed(2)}%` : 'N/A';
        document.getElementById('grossMargin').textContent = data.grossmargin ? `${data.grossmargin.toFixed(2)}%` : 'N/A';
        document.getElementById('netMargin').textContent = data.net_margain ? `${data.net_margain.toFixed(2)}%` : 'N/A';
        document.getElementById('freeCashFlow').textContent = this.formatCashFlow(data.total_free_cash_flow);
        document.getElementById('incomeGrowth').textContent = data.total_netincome_growth_10y ? `${data.total_netincome_growth_10y.toFixed(2)}%` : 'N/A';

        // ‰ª∑Ê†ºÂå∫Èó¥
        document.getElementById('return10y').textContent = data.pchange_10y ? `${data.pchange_10y.toFixed(2)}%` : 'N/A';
        document.getElementById('sma20').textContent = data.sma_20 ? `¬•${data.sma_20.toFixed(2)}` : 'N/A';
        document.getElementById('sma50').textContent = data.sma_50 ? `¬•${data.sma_50.toFixed(2)}` : 'N/A';
        document.getElementById('sma200').textContent = data.sma_200 ? `¬•${data.sma_200.toFixed(2)}` : 'N/A';

        // Ë°å‰∏öÊ†áÁ≠æ‰ø°ÊÅØ
        document.getElementById('sectorTag').textContent = data.sector || 'N/A';  // ‰∏ÄÁ∫ßË°å‰∏ö
        document.getElementById('groupTag').textContent = data.group || 'N/A';    // ‰∫åÁ∫ßË°å‰∏ö

        // Ê∏≤ÊüìÊï¥ÂêàÁöÑËØÑÁ∫ßÁ≥ªÁªü
        this.renderIntegratedRatings(data);

        // ÂÖ¨Âè∏‰ø°ÊÅØ
        if (data.business_descrpt) {
          const business = data.business_descrpt;
          document.getElementById('mainBusiness').textContent = business.main_business || 'N/A';
          document.getElementById('businessDesc').textContent = business.descrpt || 'N/A';
        } else {
          // ËÆæÁΩÆÈªòËÆ§ÂÄº
          document.getElementById('mainBusiness').textContent = 'N/A';
          document.getElementById('businessDesc').textContent = 'N/A';
        }

        this.showStockDetail();
        
        // Âª∂ËøüÊ∏≤ÊüìÈõ∑ËææÂõæÔºåÁ°Æ‰øùDOMÂÆåÂÖ®Âä†ËΩΩ
        setTimeout(() => {
          this.renderRadarChart(data);
        }, 300);
      }

      renderIntegratedRatings(data) {
        const ratingsGrid = document.getElementById('ratingsGrid');
        if (!ratingsGrid) return;
        
        const ratingData = [
          { name: '‰ª∑ÂÄºËØÑÁ∫ß', key: 'rank_gf_value', value: this.getRankValue(data.rank_gf_value) },
          { name: 'ÊàêÈïøËÉΩÂäõ', key: 'rank_growth', value: this.getRankValue(data.rank_growth) },
          { name: '‰ª∑ÂÄºÂä®Èáè', key: 'rank_momentum', value: this.getRankValue(data.rank_momentum) },
          { name: 'ÁõàÂà©ËÉΩÂäõ', key: 'rank_profitability', value: this.getRankValue(data.rank_profitability) },
          { name: 'Ë¥¢Âä°ÂÆûÂäõ', key: 'rank_balancesheet', value: this.getRankValue(data.rank_balancesheet) }
        ];
        
        ratingsGrid.innerHTML = ratingData.map((item, index) => {
          const stars = this.generateStars(item.value);
          const tooltip = this.getRatingTooltip(item.name, item.value);
          return `
            <div class="rating-item" data-index="${index}" data-value="${item.value}">
              <div class="rating-tooltip">${tooltip}</div>
              <div class="rating-label">${item.name}</div>
              <div class="star-rating">${stars}</div>
              <div class="rating-score">${item.value}/10</div>
            </div>
          `;
        }).join('');
        
        // Ê∑ªÂä†ÁÇπÂáª‰∫§‰∫í
        ratingsGrid.querySelectorAll('.rating-item').forEach((item, index) => {
          item.addEventListener('click', () => {
            this.highlightRatingItem(index);
            this.highlightRadarDimension(index);
          });
        });
        
        // ËÆ°ÁÆóÂ§ßÂ∏àËØÑÂàÜ
        this.updateRatingsSummary(ratingData, data);
      }
      
      generateStars(value) {
        let stars = '';
        for (let i = 1; i <= 10; i++) {
          const filled = i <= value ? 'filled' : '';
          stars += `<div class="star ${filled}"></div>`;
        }
        return stars;
      }
      
      getRatingTooltip(name, value) {
        let level = '';
        let description = '';
        
        if (value >= 8) {
          level = '‰ºòÁßÄ';
          description = 'Ë°®Áé∞ÂçìË∂äÔºåË∂ÖË∂äÂ∏ÇÂú∫Âπ≥ÂùáÊ∞¥Âπ≥';
        } else if (value >= 6) {
          level = 'ËâØÂ•Ω';
          description = 'Ë°®Áé∞ËâØÂ•ΩÔºåÈ´ò‰∫éÂ∏ÇÂú∫Âπ≥ÂùáÊ∞¥Âπ≥';
        } else if (value >= 4) {
          level = '‰∏ÄËà¨';
          description = 'Ë°®Áé∞‰∏ÄËà¨ÔºåÊé•ËøëÂ∏ÇÂú∫Âπ≥ÂùáÊ∞¥Âπ≥';
        } else if (value >= 2) {
          level = 'ËæÉÂ∑Æ';
          description = 'Ë°®Áé∞ËæÉÂ∑ÆÔºå‰Ωé‰∫éÂ∏ÇÂú∫Âπ≥ÂùáÊ∞¥Âπ≥';
        } else {
          level = 'ÂæàÂ∑Æ';
          description = 'Ë°®Áé∞ÂæàÂ∑ÆÔºåËøú‰Ωé‰∫éÂ∏ÇÂú∫Âπ≥ÂùáÊ∞¥Âπ≥';
        }
        
        const tooltipTexts = {
          '‰ª∑ÂÄºËØÑÁ∫ß': 'Âü∫‰∫é‰º∞ÂÄºÊ®°ÂûãÁöÑÁªºÂêàËØÑ‰ª∑',
          'ÊàêÈïøËÉΩÂäõ': 'ÂÖ¨Âè∏Ëê•Êî∂ÂíåÂà©Ê∂¶Â¢ûÈïøÊΩúÂäõ',
          '‰ª∑ÂÄºÂä®Èáè': 'ËÇ°‰ª∑Áõ∏ÂØπ‰ª∑ÂÄºÁöÑÂèòÂåñË∂ãÂäø',
          'ÁõàÂà©ËÉΩÂäõ': 'ÂÖ¨Âè∏ÁõàÂà©Ë¥®ÈáèÂíåÁ®≥ÂÆöÊÄß',
          'Ë¥¢Âä°ÂÆûÂäõ': 'ËµÑ‰∫ßË¥üÂÄ∫ÁªìÊûÑÂíåÂÅøÂÄ∫ËÉΩÂäõ'
        };
        
        const explanation = tooltipTexts[name] || 'ÁªºÂêàËØÑ‰º∞ÊåáÊ†á';
        
        return `${name}: ${level} (${value}/10)<br/>${explanation}<br/>${description}`;
      }
      
      highlightRatingItem(activeIndex) {
        const ratingItems = document.querySelectorAll('.rating-item');
        ratingItems.forEach((item, index) => {
          if (index === activeIndex) {
            item.classList.add('active');
          } else {
            item.classList.remove('active');
          }
        });
      }
      
      updateRatingsSummary(ratingData, stockData) {
        // ËÆ°ÁÆóÂ§ßÂ∏àËØÑÂàÜÔºåÁõ¥Êé•‰ΩøÁî®gf_value
        const masterScore = this.calculateMasterScore(stockData);
        
        document.getElementById('overallScore').textContent = `${masterScore}/100`;
      }
      
      calculateMasterScore(stockData) {
        // Áõ¥Êé•‰ΩøÁî®gf_score‰Ωú‰∏∫Â§ßÂ∏àËØÑÂàÜ
        const gfScore = stockData.gf_score;
        
        if (!gfScore || gfScore <= 0) {
          return 0;
        }
        
        // Á°Æ‰øùËØÑÂàÜÂú®0-100‰πãÈó¥
        return Math.max(0, Math.min(100, Math.round(gfScore)));
      }
      
      highlightRadarDimension(dimensionIndex) {
        if (this.radarChart) {
          // È´ò‰∫ÆÈõ∑ËææÂõæÁöÑÁâπÂÆöÁª¥Â∫¶
          this.radarChart.dispatchAction({
            type: 'highlight',
            seriesIndex: 0,
            dataIndex: 0
          });
        }
      }
      

      renderRadarChart(data) {
        const chartContainer = document.getElementById('radarChart');
        if (!chartContainer) return;
        
        const chart = echarts.init(chartContainer);
        
        // ÂáÜÂ§áÈõ∑ËææÂõæÊï∞ÊçÆ
        const indicators = [
          { name: '‰ª∑ÂÄºËØÑÁ∫ß', max: 10 },
          { name: 'ÊàêÈïøËÉΩÂäõ', max: 10 },
          { name: '‰ª∑ÂÄºÂä®Èáè', max: 10 },
          { name: 'ÁõàÂà©ËÉΩÂäõ', max: 10 },
          { name: 'Ë¥¢Âä°ÂÆûÂäõ', max: 10 }
        ];
        
        const values = [
          this.getRankValue(data.rank_gf_value),
          this.getRankValue(data.rank_growth),
          this.getRankValue(data.rank_momentum),
          this.getRankValue(data.rank_profitability),
          this.getRankValue(data.rank_balancesheet)
        ];

        const option = {
          backgroundColor: 'transparent',
          tooltip: {
            show: true,
            trigger: 'item',
            confine: true,
            backgroundColor: 'rgba(255,255,255,0.95)',
            borderColor: '#e2e8f0',
            borderWidth: 1,
            borderRadius: 8,
            padding: [12, 16],
            textStyle: { 
              color: '#334155',
              fontSize: 14
            },
            formatter: function(params) {
              console.log('üéØ Radar tooltip triggered:', params);
              
              const indicators = ['‰ª∑ÂÄºËØÑÁ∫ß', 'ÊàêÈïøËÉΩÂäõ', '‰ª∑ÂÄºÂä®Èáè', 'ÁõàÂà©ËÉΩÂäõ', 'Ë¥¢Âä°ÂÆûÂäõ'];
              
              if (params && params.value && Array.isArray(params.value)) {
                // ÊòæÁ§∫ÊâÄÊúâÁª¥Â∫¶ÁöÑ‰ø°ÊÅØ
                let content = '<div style="padding: 8px; max-width: 300px;">';
                content += '<div style="font-weight: bold; margin-bottom: 8px; color: #3b82f6;">Â§ßÂ∏àËØÑÂàÜËØ¶ÊÉÖ</div>';
                
                params.value.forEach((value, index) => {
                  const dimensionName = indicators[index] || `Áª¥Â∫¶${index + 1}`;
                  let level = '';
                  let color = '';
                  
                  if (value >= 8) {
                    level = '‰ºòÁßÄ';
                    color = '#10b981';
                  } else if (value >= 6) {
                    level = 'ËâØÂ•Ω';
                    color = '#3b82f6';
                  } else if (value >= 4) {
                    level = '‰∏ÄËà¨';
                    color = '#f59e0b';
                  } else {
                    level = 'ËæÉÂ∑Æ';
                    color = '#ef4444';
                  }
                  
                  content += `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                      <span style="font-size: 12px;">${dimensionName}</span>
                      <span style="color: ${color}; font-weight: bold;">${value}/10 (${level})</span>
                    </div>
                  `;
                });
                
                content += '</div>';
                return content;
              }
              
              return 'ÊöÇÊó†Êï∞ÊçÆ';
            }
          },
          radar: {
            center: ['50%', '55%'],
            radius: '60%',
            startAngle: 90,
            splitNumber: 5,
            shape: 'polygon',
            indicator: indicators,
            name: {
              textStyle: {
                color: '#334155',
                fontSize: 12,
                fontWeight: 'bold'
              },
              formatter: function(name) {
                return name;
              }
            },
            splitArea: {
              show: true,
              areaStyle: {
                color: [
                  'rgba(59, 130, 246, 0.02)',
                  'rgba(59, 130, 246, 0.04)',
                  'rgba(59, 130, 246, 0.06)',
                  'rgba(59, 130, 246, 0.08)',
                  'rgba(59, 130, 246, 0.1)'
                ]
              }
            },
            splitLine: {
              show: true,
              lineStyle: {
                color: 'rgba(59, 130, 246, 0.2)',
                width: 1
              }
            },
            axisLine: {
              show: true,
              lineStyle: {
                color: 'rgba(59, 130, 246, 0.3)',
                width: 1
              }
            }
          },
          series: [{
            name: 'Â§ßÂ∏àËØÑÂàÜ',
            type: 'radar',
            symbol: 'circle',
            symbolSize: 8,
            itemStyle: {
              color: '#3b82f6',
              borderColor: '#ffffff',
              borderWidth: 2
            },
            lineStyle: {
              color: '#3b82f6',
              width: 3
            },
            areaStyle: {
              color: 'rgba(59, 130, 246, 0.15)'
            },
            emphasis: {
              itemStyle: {
                color: '#1d4ed8',
                borderColor: '#ffffff',
                borderWidth: 3,
                shadowBlur: 10,
                shadowColor: 'rgba(59, 130, 246, 0.5)'
              },
              lineStyle: {
                color: '#1d4ed8',
                width: 4
              },
              areaStyle: {
                color: 'rgba(59, 130, 246, 0.25)'
              }
            },
            data: [{
              value: values,
              name: 'ËØÑÂàÜ'
            }]
          }],
          animation: true,
          animationDuration: 1500,
          animationEasing: 'cubicOut'
        };

        chart.setOption(option, true);
        
        // ‰øùÂ≠òÂõæË°®ÂÆû‰æã‰ª•‰æø‰∫§‰∫í
        this.radarChart = chart;
        
        // Ê∑ªÂä†ÂõæË°®ÁÇπÂáª‰∫§‰∫í
        chart.on('click', (params) => {
          if (params.componentType === 'radar') {
            const dimensionIndex = params.dataIndex || 0;
            this.highlightRatingItem(dimensionIndex);
          }
        });
        
        // Ê∑ªÂä†Èº†Ê†áÊÇ¨ÊµÆ‰∫§‰∫í
        chart.on('mouseover', (params) => {
          if (params.componentType === 'radar') {
            const dimensionIndex = params.dataIndex || 0;
            this.highlightRatingItem(dimensionIndex);
          }
        });
        
        chart.on('mouseout', () => {
          // Ê∏ÖÈô§ÊâÄÊúâÈ´ò‰∫Æ
          document.querySelectorAll('.rating-item').forEach(item => {
            item.classList.remove('active');
          });
        });

        // ÂìçÂ∫îÂºèÂ§ÑÁêÜ
        let radarResizeTimer;
        const handleRadarResize = () => {
          clearTimeout(radarResizeTimer);
          radarResizeTimer = setTimeout(() => {
            if (chart && !chart.isDisposed()) {
              chart.resize();
            }
          }, 100);
        };
        
        window.removeEventListener('resize', handleRadarResize);
        window.addEventListener('resize', handleRadarResize, { passive: true });
        
        // È°µÈù¢Âç∏ËΩΩÊó∂ÈîÄÊØÅÂõæË°®
        window.addEventListener('beforeunload', () => {
          if (chart && !chart.isDisposed()) {
            chart.dispose();
          }
        });
      }

      getRankValue(rankValue) {
        const rankValueNum = parseFloat(rankValue);
        if(isNaN(rankValueNum)) return 0;
        return rankValueNum;
      }

      detectStockBoard(symbol) {
        if (!symbol || typeof symbol !== 'string') {
          return '‰∏ªÊùø';
        }
        
        const code = symbol.trim();
        
        if (/^(000|001|002|003|600|601|603|605)/.test(code)) {
          return '‰∏ªÊùø';
        }
        
        if (/^(300|301)/.test(code)) {
          return 'Âàõ‰∏öÊùø';
        }
        
        if (/^688/.test(code)) {
          return 'ÁßëÂàõÊùø';
        }
        
        if (/^(43|83|87|92)/.test(code)) {
          return 'ÂåóËØÅ';
        }
        
        return '‰∏ªÊùø';
      }
      
      getBoardClass(board) {
        const classMap = {
          '‰∏ªÊùø': 'board-main',
          'Âàõ‰∏öÊùø': 'board-growth',
          'ÁßëÂàõÊùø': 'board-star',
          'ÂåóËØÅ': 'board-north'
        };
        return classMap[board] || 'board-main';
      }
      
      formatPrice(price) {
        if (!price) return 'N/A';
        if (typeof price === 'string') {
          return price;
        }
        return `¬•${price.toFixed(2)}`;
      }

      formatPE(pe) {
        
        if (!pe) return 'N/A';
        
        // ËΩ¨Êç¢‰∏∫Êï∞Â≠óÁ±ªÂûã
        const numPE = typeof pe === 'string' ? parseFloat(pe) : pe;
        
        // Ê£ÄÊü•ÊòØÂê¶‰∏∫ÊúâÊïàÊï∞Â≠ó
        if (!isNaN(numPE) && numPE > 1000) return '>1000';
        if(isNaN(numPE)) return pe;
        
        return numPE.toFixed(1);
      }

      renderPEChart(current, high, low) {
        const chartContainer = document.querySelector('.pe-chart-container-solo');
        const chartWrapper = document.querySelector('.pe-chart-container-solo .pe-chart-wrapper');
        const chartTitle = document.querySelector('.pe-chart-container-solo .pe-chart-title');
        
        // Ê£ÄÊü•ÂΩìÂâçPEÊòØÂê¶‰∏∫‰∫èÊçüÊàñÊó†Êïà
        const currentPE = typeof current === 'string' ? parseFloat(current) : current;
        const isCurrentLoss = !current || current === 'N/A' || isNaN(currentPE) || currentPE <= 0;
        
        if (isCurrentLoss) {
          // ÊòæÁ§∫‰∫èÊçü‰ºÅ‰∏öÁä∂ÊÄÅ
          chartTitle.textContent = 'Â∏ÇÁõàÁéá‰º∞ÂÄºÂå∫Èó¥';
          chartWrapper.innerHTML = `
            <div class="loss-indicator">
              <div class="loss-icon">üìâ</div>
              <div class="loss-content">
                <div class="loss-text">‰∫èÊçü‰ºÅ‰∏ö</div>
                <div class="loss-desc">ÂΩìÂâçÂ§Ñ‰∫é‰∫èÊçüÁä∂ÊÄÅÔºåÊó†Ê≥ïËÆ°ÁÆóÂ∏ÇÁõàÁéá</div>
              </div>
            </div>
          `;
          return;
        }
        
        // Â§ÑÁêÜÁõàÂà©‰ºÅ‰∏öÁöÑPEÊï∞ÊçÆ
        const highPE = typeof high === 'string' ? parseFloat(high) : high;
        let lowPE = typeof low === 'string' ? parseFloat(low) : low;
        
        // Â¶ÇÊûúÂéÜÂè≤ÊúÄ‰ΩéPE‰∏∫Ë¥üÊï∞ÊàñÊó†ÊïàÔºåËÆæ‰∏∫0
        if (!lowPE || lowPE === 'N/A' || isNaN(lowPE) || lowPE <= 0) {
          lowPE = 0;
        }
        
        // Êõ¥Êñ∞Ê†áÁ≠æÊòæÁ§∫
        document.getElementById('peCurrentLabel').textContent = this.formatPE(current);
        document.getElementById('peHighLabel').textContent = this.formatPE(high);
        document.getElementById('peLowLabel').textContent = this.formatPE(low);
        document.getElementById('peCurrentValue').textContent = this.formatPE(current);
        
        // ÊÅ¢Â§çÊ≠£Â∏∏ÂõæË°®HTMLÁªìÊûÑÔºàÂ¶ÇÊûú‰πãÂâçÊòØ‰∫èÊçüÁä∂ÊÄÅÔºâ
        if (chartWrapper.querySelector('.loss-indicator')) {
          chartTitle.textContent = 'Â∏ÇÁõàÁéá‰º∞ÂÄºÂå∫Èó¥';
          chartWrapper.innerHTML = `
            <div class="pe-range-bar">
              <div class="pe-range-track"></div>
              <div class="pe-current-marker" id="peCurrentMarker">
                <span class="pe-current-value" id="peCurrentValue">-</span>
              </div>
            </div>
            <div class="pe-labels">
              <span class="pe-label pe-low">
                <span class="pe-label-title">10Âπ¥ÊúÄ‰Ωé</span>
                <span class="pe-label-value" id="peLowLabel">-</span>
              </span>
              <span class="pe-label pe-current">
                <span class="pe-label-title">ÂΩìÂâçTTM</span>
                <span class="pe-label-value" id="peCurrentLabel">-</span>
              </span>
              <span class="pe-label pe-high">
                <span class="pe-label-title">10Âπ¥ÊúÄÈ´ò</span>
                <span class="pe-label-value" id="peHighLabel">-</span>
              </span>
            </div>
          `;
          // ÈáçÊñ∞Â°´ÂÖÖÊï∞ÊçÆ
          document.getElementById('peCurrentLabel').textContent = this.formatPE(current);
          document.getElementById('peHighLabel').textContent = this.formatPE(high);
          document.getElementById('peLowLabel').textContent = lowPE === 0 ? '0.0' : this.formatPE(low);
          document.getElementById('peCurrentValue').textContent = this.formatPE(current);
        }
        
        // ËÆ°ÁÆó‰ΩçÁΩÆÂíåÁªòÂà∂ÂõæË°®
        if (currentPE > 0 && highPE > 0 && highPE > lowPE) {
          // ËÆ°ÁÆó‰ΩçÁΩÆÁôæÂàÜÊØî
          let position = ((currentPE - lowPE) / (highPE - lowPE)) * 100;
          position = Math.max(5, Math.min(95, position));
          
          // ËÆæÁΩÆÊ†áËÆ∞‰ΩçÁΩÆ
          const marker = document.getElementById('peCurrentMarker');
          if (marker) {
            marker.style.left = `${position}%`;
            marker.style.display = 'block';
            
            // Ê†πÊçÆ‰ΩçÁΩÆËÆæÁΩÆÈ¢úËâ≤
            let color;
            if (position <= 33) {
              color = '#10b981'; // ÁªøËâ≤ - ‰Ωé‰º∞
            } else if (position <= 66) {
              color = '#f59e0b'; // Ê©ôËâ≤ - ÂêàÁêÜ
            } else {
              color = '#ef4444'; // Á∫¢Ëâ≤ - È´ò‰º∞
            }
            
            marker.style.background = color;
          }
        } else {
          // Êï∞ÊçÆÊó†ÊïàÊó∂ÈöêËóèÊ†áËÆ∞
          const marker = document.getElementById('peCurrentMarker');
          if (marker) {
            marker.style.display = 'none';
          }
        }
      }

      renderPriceRangeChart(current, high, low) {
        // Â§ÑÁêÜ‰ª∑Ê†ºÊï∞ÊçÆÔºåÂéªÈô§Ë¥ßÂ∏ÅÁ¨¶Âè∑
        const cleanPrice = (price) => {
          if (!price || price === 'N/A') return null;
          if (typeof price === 'string') {
            return parseFloat(price.replace(/[¬•$,]/g, ''));
          }
          return price;
        };
        
        const currentPrice = cleanPrice(current);
        const highPrice = cleanPrice(high);
        const lowPrice = cleanPrice(low);
        
        // Â°´ÂÖÖÊ†áÁ≠æÊï∞ÂÄº
        document.getElementById('priceCurrentLabel').textContent = currentPrice ? `¬•${currentPrice.toFixed(2)}` : 'N/A';
        document.getElementById('priceHighLabel').textContent = highPrice ? `¬•${highPrice.toFixed(2)}` : 'N/A';
        document.getElementById('priceLowLabel').textContent = lowPrice ? `¬•${lowPrice.toFixed(2)}` : 'N/A';
        document.getElementById('priceCurrentValue').textContent = currentPrice ? `¬•${currentPrice.toFixed(2)}` : 'N/A';
        
        // ËÆ°ÁÆóÂΩìÂâç‰ª∑Ê†ºÂú®Âå∫Èó¥‰∏≠ÁöÑ‰ΩçÁΩÆ
        if (currentPrice && highPrice && lowPrice) {
          
          // Ê£ÄÊü•Êï∞ÊçÆÊúâÊïàÊÄß
          if (!isNaN(currentPrice) && !isNaN(highPrice) && !isNaN(lowPrice) && highPrice > lowPrice) {
            // ËÆ°ÁÆó‰ΩçÁΩÆÁôæÂàÜÊØî
            let position = ((currentPrice - lowPrice) / (highPrice - lowPrice)) * 100;
            position = Math.max(5, Math.min(95, position)); // Á°Æ‰øùÂú®5-95‰πãÈó¥ÔºåÈÅøÂÖçË¥¥Ëæπ
            
            // ËÆæÁΩÆÊ†áËÆ∞‰ΩçÁΩÆ
            const marker = document.getElementById('priceCurrentMarker');
            if (marker) {
              marker.style.left = `${position}%`;
              marker.style.display = 'block';
              
              // Ê†πÊçÆ‰ΩçÁΩÆËÆæÁΩÆÈ¢úËâ≤ÔºàËÇ°‰ª∑Âå∫Èó¥Ôºö‰Ωé‰ª∑‰ΩçÂ•ΩÔºåÈ´ò‰ª∑‰ΩçÈúÄË∞®ÊÖéÔºâ
              let color;
              if (position <= 33) {
                color = '#ef4444'; // Á∫¢Ëâ≤ - Êé•ËøëÂéÜÂè≤‰ΩéÁÇπÔºåÂèØËÉΩÊòØÊú∫‰ºö
              } else if (position <= 66) {
                color = '#f59e0b'; // Ê©ôËâ≤ - ‰∏≠Á≠â‰ª∑‰Ωç
              } else {
                color = '#10b981'; // ÁªøËâ≤ - Êé•ËøëÂéÜÂè≤È´òÁÇπÔºåÈúÄË∞®ÊÖé
              }
              
              marker.style.background = color;
            }
          } else {
            // Êï∞ÊçÆÊó†ÊïàÊó∂ÈöêËóèÊ†áËÆ∞
            const marker = document.getElementById('priceCurrentMarker');
            if (marker) {
              marker.style.display = 'none';
            }
          }
        } else {
          // Êï∞ÊçÆ‰∏çÂÆåÊï¥Êó∂ÈöêËóèÊ†áËÆ∞
          const marker = document.getElementById('priceCurrentMarker');
          if (marker) {
            marker.style.display = 'none';
          }
        }
      }

      formatMarketCap(value) {
        if (!value) return 'N/A';
        
        if (value >= 1e12) {
          return (value / 1e12).toFixed(2) + '‰∏á‰∫ø';
        } else if (value >= 1e8) {
          return (value / 1e8).toFixed(2) + '‰∫ø';
        } else if (value >= 1e4) {
          return (value / 1e4).toFixed(2) + '‰∏á';
        }
        return value.toFixed(2);
      }

      formatCashFlow(value) {
        if (value === null || value === undefined || isNaN(value)) return 'N/A';
        
        const absValue = Math.abs(value);
        let unit = '';
        let num = value;
        
        if (absValue >= 1e12) {
          num = value / 1e12;
          unit = '‰∏á‰∫ø';
        } else if (absValue >= 1e8) {
          num = value / 1e8;
          unit = '‰∫ø';
        } else if (absValue >= 1e4) {
          num = value / 1e4;
          unit = '‰∏á';
        }
        
        return num.toFixed(2) + unit;
      }

      formatDate(dateStr) {
        if (!dateStr) return 'N/A';
        const str = dateStr.toString();
        if (str.length === 8) {
          return `${str.substr(0,4)}-${str.substr(4,2)}-${str.substr(6,2)}`;
        }
        return dateStr;
      }

      getScoreColor(score) {
        if (!score) return '#94a3b8';
        if (score >= 80) return '#10b981';
        if (score >= 60) return '#f59e0b';
        if (score >= 40) return '#ef4444';
        return '#6b7280';
      }
      
      getValuationDescription(valuation) {
        const descriptions = {
          0: 'Êï∞ÊçÆ‰∏çË∂≥',
          1: 'Êï∞ÊçÆÈïø‰πÖÊú™Êõ¥Êñ∞',
          2: '‰ª∑ÂÄºÈô∑Èò±Â´åÁñë',
          3: '‰∏•Èáç‰Ωé‰º∞',
          4: '‰Ωé‰º∞',
          5: 'ÂêàÁêÜËåÉÂõ¥',
          6: 'È´ò‰º∞',
          7: '‰∏•ÈáçÈ´ò‰º∞'
        };
        return descriptions[valuation] || 'Êú™Áü•';
      }

      showStockDetail() {
        this.loadingIndicator.style.display = 'none';
        this.errorMessage.style.display = 'none';
        this.stockDetail.style.display = 'block';
        
        // Ê∑ªÂä†ÂÖ•Âú∫Âä®Áîª
        this.addEntranceAnimations();
      }
      
      addEntranceAnimations() {
        const elements = [
          '.stock-info-card',
          '.price-panel .price-card',
          '.ratings-section',
          '.data-card',
          '.chart-section',
          '.company-section'
        ];
        
        elements.forEach((selector, index) => {
          const items = document.querySelectorAll(selector);
          items.forEach((item, itemIndex) => {
            item.style.opacity = '0';
            item.style.transform = 'translateY(30px)';
            
            setTimeout(() => {
              item.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
              item.style.opacity = '1';
              item.style.transform = 'translateY(0)';
            }, (index * 200) + (itemIndex * 100));
          });
        });
      }
      
      showError(message) {
        this.loadingIndicator.style.display = 'none';
        this.stockDetail.style.display = 'none';
        this.errorMessage.style.display = 'block';
        this.errorMessage.textContent = message;
      }
      
      loadDataDate() {
        try {
          const urlParams = new URLSearchParams(window.location.search);
          const date = urlParams.get('date');
          
          if (date) {
            const formattedDate = this.formatDataDate(date);
            document.getElementById('dataDate').textContent = `Êï∞ÊçÆÊó•Êúü: ${formattedDate}`;
          } else {
            document.getElementById('dataDate').textContent = '';
          }
        } catch (error) {
          console.error('Ëé∑ÂèñURLÊó•ÊúüÂèÇÊï∞Â§±Ë¥•:', error);
          document.getElementById('dataDate').textContent = '';
        }
      }
      
      formatDataDate(dateStr) {
        if (dateStr && dateStr.length === 10) {
          const date = new Date(dateStr);
          const options = { 
            year: 'numeric', 
            month: '2-digit', 
            day: '2-digit'
          };
          return date.toLocaleDateString('zh-CN', options);
        }
        return dateStr;
      }
    }

    // ÂàùÂßãÂåñËØ¶ÊÉÖÈ°µ
    document.addEventListener('DOMContentLoaded', () => {
      const stockDetail = new StockDetail();
      stockDetail.loadDataDate();
    });
  </script>
</body>
</html>
</html>